---
title: Migrer des scripts Azure PowerShell depuis AzureRM vers Az
description: Découvrez les étapes et les outils pour effectuer une migration des scripts à partir du module AzureRM vers le nouveau module Az.
author: sptramer
ms.author: sttramer
manager: carmonm
ms.devlang: powershell
ms.topic: conceptual
ms.date: 12/13/2018
ms.openlocfilehash: 28122ca953d62b405f19effbbc680f2dc6202cca
ms.sourcegitcommit: 2054a8f74cd9bf5a50ea7fdfddccaa632c842934
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/12/2019
ms.locfileid: "56144372"
---
# <a name="migrate-from-azurerm-to-azure-powershell-az"></a><span data-ttu-id="fc642-103">Migrer de AzureRM vers Azure PowerShell Az</span><span class="sxs-lookup"><span data-stu-id="fc642-103">Migrate from AzureRM to Azure PowerShell Az</span></span>

<span data-ttu-id="fc642-104">Le module Az a la même parité des fonctionnalités que AzureRM, mais il utilise des noms de cmdlets plus courts et plus cohérents.</span><span class="sxs-lookup"><span data-stu-id="fc642-104">The Az module has feature parity with AzureRM, but uses shorter and more consistent cmdlet names.</span></span>
<span data-ttu-id="fc642-105">Les scripts écrits pour les cmdlets AzureRM ne fonctionnent pas automatiquement avec le nouveau module.</span><span class="sxs-lookup"><span data-stu-id="fc642-105">Scripts written for the AzureRM cmdlets won't automatically work with the new module.</span></span> <span data-ttu-id="fc642-106">Pour faciliter la transition, Az propose des outils qui vous permettent d’exécuter vos scripts existants à l’aide d’AzureRM.</span><span class="sxs-lookup"><span data-stu-id="fc642-106">To make the transition easier, Az offers tools to allow you to run your existing scripts using AzureRM.</span></span> <span data-ttu-id="fc642-107">Il n’existe pas une migration vers un nouveau jeu de commandes qui soit pratique, mais cet article vous aide à bien démarrer la transition vers le nouveau module.</span><span class="sxs-lookup"><span data-stu-id="fc642-107">No migration to a new command set is ever convenient, but this article will help you get started on transitioning to the new module.</span></span>

<span data-ttu-id="fc642-108">Pour obtenir la liste complète des changements cassants entre AzureRM et Az, consultez le [guide de migration pour Az 1.0.0](migrate-az-1.0.0.md).</span><span class="sxs-lookup"><span data-stu-id="fc642-108">To see the full list of breaking changes between AzureRM and Az, see the [Migration guide for Az 1.0.0](migrate-az-1.0.0.md)</span></span>

## <a name="check-for-installed-versions-of-azurerm"></a><span data-ttu-id="fc642-109">Rechercher les versions installées d’AzureRM</span><span class="sxs-lookup"><span data-stu-id="fc642-109">Check for installed versions of AzureRM</span></span>

<span data-ttu-id="fc642-110">Le module Az peut être installé côte à côte avec le module AzureRM, mais cela n’est pas recommandé.</span><span class="sxs-lookup"><span data-stu-id="fc642-110">The Az module can be installed side-by-side with the AzureRM module, but this is not recommended.</span></span> <span data-ttu-id="fc642-111">Avant d’effectuer toutes les étapes de migration, vérifiez les versions d’AzureRM installées sur votre système.</span><span class="sxs-lookup"><span data-stu-id="fc642-111">Before taking any migration steps, check which versions of AzureRM are installed on your system.</span></span> <span data-ttu-id="fc642-112">Vous pouvez ainsi vous assurer que les scripts s’exécutent déjà sur la dernière version et savoir si vous pouvez activer des alias de commande sans désinstaller AzureRM.</span><span class="sxs-lookup"><span data-stu-id="fc642-112">Doing so allows you to make sure scripts are already running on the latest release, and let you know if you can enable command aliases without uninstalling AzureRM.</span></span>

<span data-ttu-id="fc642-113">Pour vérifier quelles sont les versions d’AzureRM que vous avez installées, exécutez la commande :</span><span class="sxs-lookup"><span data-stu-id="fc642-113">To check which version(s) of AzureRM you have installed, run the command:</span></span>

```powershell-interactive
Get-InstalledModule -Name AzureRM -AllVersions
```

## <a name="ensure-your-existing-scripts-work-with-the-latest-azurerm-release"></a><span data-ttu-id="fc642-114">Assurez-vous que vos scripts existants fonctionnent avec la dernière version d’AzureRM</span><span class="sxs-lookup"><span data-stu-id="fc642-114">Ensure your existing scripts work with the latest AzureRM release</span></span>

<span data-ttu-id="fc642-115">Il s’agit de l’étape la plus importante.</span><span class="sxs-lookup"><span data-stu-id="fc642-115">This is the most important step!</span></span> <span data-ttu-id="fc642-116">Exécutez vos scripts existants et assurez-vous qu’ils fonctionnent avec la _dernière_ version d’AzureRM (__6.13.1__).</span><span class="sxs-lookup"><span data-stu-id="fc642-116">Run your existing scripts, and make sure that they work with the _latest_ release of AzureRM (__6.13.1__).</span></span> <span data-ttu-id="fc642-117">Si vos scripts ne fonctionnent pas, veuillez lire le [guide de migration AzureRM](/powershell/azure/azurerm/migration-guide.6.0.0).</span><span class="sxs-lookup"><span data-stu-id="fc642-117">If your scripts don't work, make sure to read the [AzureRM migration guide](/powershell/azure/azurerm/migration-guide.6.0.0).</span></span>

## <a name="install-the-azure-powershell-az-module"></a><span data-ttu-id="fc642-118">Installer le module Azure PowerShell Az</span><span class="sxs-lookup"><span data-stu-id="fc642-118">Install the Azure PowerShell Az module</span></span>

<span data-ttu-id="fc642-119">La première étape consiste à installer le module Az sur votre plateforme.</span><span class="sxs-lookup"><span data-stu-id="fc642-119">The first step is to install the Az module on your platform.</span></span> <span data-ttu-id="fc642-120">Lorsque vous installez Az, il est recommandé de désinstaller AzureRM.</span><span class="sxs-lookup"><span data-stu-id="fc642-120">When you install Az, it's recommended that you uninstall AzureRM.</span></span> <span data-ttu-id="fc642-121">Dans les étapes suivantes, vous découvrez comment poursuivre l’exécution de vos scripts existants et activer la compatibilité pour les anciens noms de cmdlets.</span><span class="sxs-lookup"><span data-stu-id="fc642-121">In the following steps, you'll learn how to keep running your existing scripts and enable compatibility for old cmdlet names.</span></span>

<span data-ttu-id="fc642-122">Pour installer le module Azure PowerShell Az, suivez les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="fc642-122">To install the Azure PowerShell Az module, follow these steps:</span></span>

* <span data-ttu-id="fc642-123">__RECOMMANDÉ__ : [Désinstaller le module AzureRM](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span><span class="sxs-lookup"><span data-stu-id="fc642-123">__RECOMMENDED__: [Uninstall the AzureRM module](/powershell/azure/uninstall-az-ps#uninstall-the-azurerm-module).</span></span>
  <span data-ttu-id="fc642-124">Assurez-vous de supprimer _toutes les_ versions installées d’AzureRM, et non pas simplement la plus récente.</span><span class="sxs-lookup"><span data-stu-id="fc642-124">Make sure that you remove _all_ installed versions of AzureRM, not just the most recent version.</span></span>
* [<span data-ttu-id="fc642-125">Installer le module Az</span><span class="sxs-lookup"><span data-stu-id="fc642-125">Install the Az module</span></span>](install-az-ps.md)

## <a name="a-namealiasesenable-azurerm-compatibility-aliases"></a><span data-ttu-id="fc642-126"><a name="aliases"/>Activer les alias de compatibilité AzureRM</span><span class="sxs-lookup"><span data-stu-id="fc642-126"><a name="aliases"/>Enable AzureRM compatibility aliases</span></span> 

> [!IMPORTANT]
>
> <span data-ttu-id="fc642-127">Activez uniquement le mode de compatibilité si vous avez désinstallé _toutes_ les versions d’AzureRM.</span><span class="sxs-lookup"><span data-stu-id="fc642-127">Only enable compatibility mode if you've uninstalled _all_ versions of AzureRM.</span></span> <span data-ttu-id="fc642-128">L’activation du mode de compatibilité alors que les cmdlets AzureRM sont encore disponibles peut entraîner un comportement imprévisible.</span><span class="sxs-lookup"><span data-stu-id="fc642-128">Enabling compatibility mode with AzureRM cmdlets still available may result in unpredictable behavior.</span></span> <span data-ttu-id="fc642-129">Ignorez cette étape si vous avez décidé de conserver l’installation d’AzureRM, mais n’oubliez pas que les cmdlets AzureRM utiliseront les anciens modules et n’appelleront pas appeler les cmdlets Az.</span><span class="sxs-lookup"><span data-stu-id="fc642-129">Skip this step if you decided to keep AzureRM installed, but be aware that any AzureRM cmdlets will use the older modules and not call any Az cmdlets.</span></span>

<span data-ttu-id="fc642-130">Une fois AzureRM désinstallé et vos scripts utilisant la dernière version d’AzureRM, vous pouvez procéder à l’activation du mode de compatibilité pour le module Az.</span><span class="sxs-lookup"><span data-stu-id="fc642-130">With AzureRM uninstalled and your scripts working with the latest AzureRM version, the next step is to enable the compatibility mode for the Az module.</span></span> <span data-ttu-id="fc642-131">La compatibilité est activée à l’aide de la commande :</span><span class="sxs-lookup"><span data-stu-id="fc642-131">Compatibility is enabled with the command:</span></span>

```powershell-interactive
Enable-AzureRmAlias -Scope CurrentUser
```

<span data-ttu-id="fc642-132">Les alias rendent possible l’utilisation des anciens noms de cmdlets avec le module Az installé.</span><span class="sxs-lookup"><span data-stu-id="fc642-132">Aliases enable the ability to use old cmdlet names with the Az module installed.</span></span> <span data-ttu-id="fc642-133">Ces alias sont écrits dans le profil utilisateur pour l’étendue sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="fc642-133">These aliases are written to the user profile for the selected scope.</span></span> <span data-ttu-id="fc642-134">S’il n’en existe aucun, un profil utilisateur est créé.</span><span class="sxs-lookup"><span data-stu-id="fc642-134">If no user profile exists, one is created.</span></span>

> [!WARNING]
>
> <span data-ttu-id="fc642-135">Vous pouvez utiliser une autre `-Scope` pour cette commande, mais ce n’est pas conseillé !</span><span class="sxs-lookup"><span data-stu-id="fc642-135">You can use a different `-Scope` for this command, but it's not recommended.</span></span> <span data-ttu-id="fc642-136">Les alias sont écrits dans le profil utilisateur pour l’étendue sélectionnée. Ainsi, poursuivez leur activation pour une étendue aussi limitée que possible.</span><span class="sxs-lookup"><span data-stu-id="fc642-136">Aliases are written to the user profile for the selected scope, so keep enabling them to as limited a scope as possible.</span></span> <span data-ttu-id="fc642-137">L’activation des alias à l’échelle du système peut également entraîner des problèmes pour d’autres utilisateurs qui ont installé AzureRM dans leur étendue locale.</span><span class="sxs-lookup"><span data-stu-id="fc642-137">Enabling aliases system-wide could also cause issues for other users which have AzureRM installed in their local scope.</span></span>

<span data-ttu-id="fc642-138">Une fois le mode alias activé, exécutez une nouvelle fois les scripts pour confirmer qu’ils fonctionnent toujours comme prévu.</span><span class="sxs-lookup"><span data-stu-id="fc642-138">Once the alias mode is enabled, run your scripts again to confirm that they still function as expected.</span></span> 

## <a name="change-module-imports-and-cmdlet-names"></a><span data-ttu-id="fc642-139">Modifier les importations de modules et les noms de cmdlets</span><span class="sxs-lookup"><span data-stu-id="fc642-139">Change module imports and cmdlet names</span></span>

<span data-ttu-id="fc642-140">En règle générale, les noms de module ont été modifiés pour que `AzureRM` et `Azure` deviennent `Az`et il en va de même pour les cmdlets.</span><span class="sxs-lookup"><span data-stu-id="fc642-140">In general, the module names have been changed so that `AzureRM` and `Azure` become `Az`, and the same for cmdlets.</span></span>
<span data-ttu-id="fc642-141">Par exemple, le module `AzureRM.Compute` a été renommé `Az.Compute`.</span><span class="sxs-lookup"><span data-stu-id="fc642-141">For example, the `AzureRM.Compute` module has been renamed to `Az.Compute`.</span></span> <span data-ttu-id="fc642-142">`New-AzureRMVM` est devenu `New-AzVM` et `Get-AzureStorageBlob` est désormais `Get-AzStorageBlob`.</span><span class="sxs-lookup"><span data-stu-id="fc642-142">`New-AzureRMVM` has become `New-AzVM`, and `Get-AzureStorageBlob` is now `Get-AzStorageBlob`.</span></span>

<span data-ttu-id="fc642-143">Il existe des exceptions à cette modification de dénomination que vous devez connaître.</span><span class="sxs-lookup"><span data-stu-id="fc642-143">There are exceptions to this naming change that you should be aware of.</span></span> <span data-ttu-id="fc642-144">Certains modules ont été renommés ou fusionnés dans les modules existants sans incidence sur le suffixe de leurs cmdlets, à l’exception du remplacement de `AzureRM` ou `Azure` par `Az`.</span><span class="sxs-lookup"><span data-stu-id="fc642-144">Some modules were renamed or merged into existing modules without this affecting the suffix of their cmdlets, other than changing `AzureRM` or `Azure` to `Az`.</span></span> <span data-ttu-id="fc642-145">Sinon, le suffixe complet de la cmdlet a été modifié pour refléter le nouveau nom de module.</span><span class="sxs-lookup"><span data-stu-id="fc642-145">Otherwise, the full cmdlet suffix was changed to reflect the new module name.</span></span>

| <span data-ttu-id="fc642-146">Module AzureRM</span><span class="sxs-lookup"><span data-stu-id="fc642-146">AzureRM module</span></span> | <span data-ttu-id="fc642-147">Module Az</span><span class="sxs-lookup"><span data-stu-id="fc642-147">Az module</span></span> | <span data-ttu-id="fc642-148">Suffixe de cmdlet modifié ?</span><span class="sxs-lookup"><span data-stu-id="fc642-148">Cmdlet suffix changed?</span></span> |
|----------------|-----------|------------------------|
| <span data-ttu-id="fc642-149">AzureRM.Profile</span><span class="sxs-lookup"><span data-stu-id="fc642-149">AzureRM.Profile</span></span> | <span data-ttu-id="fc642-150">Az.Accounts</span><span class="sxs-lookup"><span data-stu-id="fc642-150">Az.Accounts</span></span> | <span data-ttu-id="fc642-151">OUI</span><span class="sxs-lookup"><span data-stu-id="fc642-151">Yes</span></span> |
| <span data-ttu-id="fc642-152">AzureRM.Insights</span><span class="sxs-lookup"><span data-stu-id="fc642-152">AzureRM.Insights</span></span> | <span data-ttu-id="fc642-153">Az.Monitor</span><span class="sxs-lookup"><span data-stu-id="fc642-153">Az.Monitor</span></span> | <span data-ttu-id="fc642-154">OUI</span><span class="sxs-lookup"><span data-stu-id="fc642-154">Yes</span></span> |
| <span data-ttu-id="fc642-155">AzureRM.DataFactories</span><span class="sxs-lookup"><span data-stu-id="fc642-155">AzureRM.DataFactories</span></span> | <span data-ttu-id="fc642-156">Az.DataFactory</span><span class="sxs-lookup"><span data-stu-id="fc642-156">Az.DataFactory</span></span> | <span data-ttu-id="fc642-157">OUI</span><span class="sxs-lookup"><span data-stu-id="fc642-157">Yes</span></span> |
| <span data-ttu-id="fc642-158">AzureRM.DataFactoryV2</span><span class="sxs-lookup"><span data-stu-id="fc642-158">AzureRM.DataFactoryV2</span></span> | <span data-ttu-id="fc642-159">Az.DataFactory</span><span class="sxs-lookup"><span data-stu-id="fc642-159">Az.DataFactory</span></span> | <span data-ttu-id="fc642-160">OUI</span><span class="sxs-lookup"><span data-stu-id="fc642-160">Yes</span></span> |
| <span data-ttu-id="fc642-161">AzureRM.RecoveryServices.Backup</span><span class="sxs-lookup"><span data-stu-id="fc642-161">AzureRM.RecoveryServices.Backup</span></span> | <span data-ttu-id="fc642-162">Az.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="fc642-162">Az.RecoveryServices</span></span> | <span data-ttu-id="fc642-163">Non </span><span class="sxs-lookup"><span data-stu-id="fc642-163">No</span></span> |
| <span data-ttu-id="fc642-164">AzureRM.RecoveryServices.SiteRecovery</span><span class="sxs-lookup"><span data-stu-id="fc642-164">AzureRM.RecoveryServices.SiteRecovery</span></span> | <span data-ttu-id="fc642-165">Az.RecoveryServices</span><span class="sxs-lookup"><span data-stu-id="fc642-165">Az.RecoveryServices</span></span> | <span data-ttu-id="fc642-166">Non </span><span class="sxs-lookup"><span data-stu-id="fc642-166">No</span></span> |
| <span data-ttu-id="fc642-167">AzureRM.Tags</span><span class="sxs-lookup"><span data-stu-id="fc642-167">AzureRM.Tags</span></span> | <span data-ttu-id="fc642-168">Az.Resources</span><span class="sxs-lookup"><span data-stu-id="fc642-168">Az.Resources</span></span> | <span data-ttu-id="fc642-169">Non </span><span class="sxs-lookup"><span data-stu-id="fc642-169">No</span></span> |
| <span data-ttu-id="fc642-170">AzureRM.MachineLearningCompute</span><span class="sxs-lookup"><span data-stu-id="fc642-170">AzureRM.MachineLearningCompute</span></span> | <span data-ttu-id="fc642-171">Az.MachineLearning</span><span class="sxs-lookup"><span data-stu-id="fc642-171">Az.MachineLearning</span></span> | <span data-ttu-id="fc642-172">Non </span><span class="sxs-lookup"><span data-stu-id="fc642-172">No</span></span> |
| <span data-ttu-id="fc642-173">AzureRM.UsageAggregates</span><span class="sxs-lookup"><span data-stu-id="fc642-173">AzureRM.UsageAggregates</span></span> | <span data-ttu-id="fc642-174">Az.Billing</span><span class="sxs-lookup"><span data-stu-id="fc642-174">Az.Billing</span></span> | <span data-ttu-id="fc642-175">Non </span><span class="sxs-lookup"><span data-stu-id="fc642-175">No</span></span> |
| <span data-ttu-id="fc642-176">AzureRM.Consumption</span><span class="sxs-lookup"><span data-stu-id="fc642-176">AzureRM.Consumption</span></span> | <span data-ttu-id="fc642-177">Az.Billing</span><span class="sxs-lookup"><span data-stu-id="fc642-177">Az.Billing</span></span> | <span data-ttu-id="fc642-178">Non </span><span class="sxs-lookup"><span data-stu-id="fc642-178">No</span></span> |

## <a name="summary"></a><span data-ttu-id="fc642-179">Résumé</span><span class="sxs-lookup"><span data-stu-id="fc642-179">Summary</span></span>

<span data-ttu-id="fc642-180">Suivez les étapes suivantes pour mettre à jour tous vos scripts existants et utiliser le nouveau module.</span><span class="sxs-lookup"><span data-stu-id="fc642-180">By following these steps, you can update all of your existing scripts to use the new module.</span></span> <span data-ttu-id="fc642-181">Si vous avez des questions concernant ces étapes ou rencontrez des problèmes rendant la migration difficile, veuillez laisser un commentaire sur cet article afin que nous puissions améliorer les instructions.</span><span class="sxs-lookup"><span data-stu-id="fc642-181">If you have any questions or problems with these steps that made your migration difficult, please comment on this article so that we can improve the instructions.</span></span>
